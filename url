#!/bin/bash
clear
# === Colors ===
RED="\033[1;31m"
GREEN="\033[1;32m"
YELLOW="\033[1;33m"
BLUE="\033[1;34m"
MAGENTA="\033[1;35m"
RESET="\033[0m"

echo -e "${BLUE}==== Custom Mask URL Generator ====${RESET}"

# Step 1: Ask for URL
while true; do
  echo -ne "${MAGENTA}Enter the target URL: ${RESET}"
  read ORIGINAL_URL

  # Simple URL pattern check
  if [[ $ORIGINAL_URL =~ ^https?:// ]]; then
    break
  else
    echo -e "${YELLOW}⚠️ URL doesn't contain http/https.${RESET}"
    echo -ne "${MAGENTA}Do you want to add it?\n1) http\n2) https\nChoose: ${RESET}"
    read SCHEME_CHOICE

    if [ "$SCHEME_CHOICE" == "1" ]; then
      ORIGINAL_URL="http://$ORIGINAL_URL"
    else
      ORIGINAL_URL="https://$ORIGINAL_URL"
    fi

    echo -e "${GREEN}[+] Updated URL: $ORIGINAL_URL${RESET}"
    break
  fi
done

# Step 2: Ask to shorten
echo -ne "${MAGENTA}Do you want to shorten the URL? (y/n): ${RESET}"
read SHORT_CHOICE

if [[ "$SHORT_CHOICE" == "y" || "$SHORT_CHOICE" == "Y" ]]; then
  echo -e "${YELLOW}[*] Shortening URL using is.gd...${RESET}"
  SHORT_URL=$(curl -s -G --data-urlencode "url=$ORIGINAL_URL" https://is.gd/create.php?format=simple)

  if [[ "$SHORT_URL" =~ ^https?:// ]]; then
    echo -e "${GREEN}[+] Shortened URL: $SHORT_URL${RESET}"
    FINAL_TARGET="$SHORT_URL"
  else
    echo -e "${RED}[!] Failed to shorten URL. Using original.${RESET}"
    FINAL_TARGET="$ORIGINAL_URL"
  fi
else
  FINAL_TARGET="$ORIGINAL_URL"
fi

# Step 3: Masking options
echo -e "\n${BLUE}Choose mask domain:${RESET}"
echo -e "${YELLOW}1) facebook.com\n2) youtube.com\n3) instagram.com\n4) twitter.com\n5) custom domain${RESET}"
echo -ne "${MAGENTA}Enter choice [1-5]: ${RESET}"
read DOMAIN_CHOICE

case $DOMAIN_CHOICE in
  1) MASK_DOMAIN="facebook.com" ;;
  2) MASK_DOMAIN="youtube.com" ;;
  3) MASK_DOMAIN="instagram.com" ;;
  4) MASK_DOMAIN="twitter.com" ;;
  5) echo -ne "${MAGENTA}Enter your custom domain (without http/https): ${RESET}"
     read MASK_DOMAIN ;;
  *) echo -e "${RED}❌ Invalid choice. Exiting.${RESET}" && exit 1 ;;
esac

# Step 4: Ask for SE words
echo -ne "${MAGENTA}Enter social engineering words (e.g., free-gift): ${RESET}"
read SE_WORDS

# Final masked URL
SHORT_ONLY=$(echo "$FINAL_TARGET" | sed 's|https\?://||')
MASKED_URL="https://${MASK_DOMAIN}-${SE_WORDS}@${SHORT_ONLY}"

echo -e "\n${GREEN}✅ Final Masked URL:${RESET}"
echo -e "${YELLOW}${MASKED_URL}${RESET}"
